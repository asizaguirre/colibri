{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/alam/projetos/colibri/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { prisma } from './lib/prisma';   // ✅ import nomeado\nimport { revalidatePath } from 'next/cache';\nimport { Specialty, Role, AppointmentStatus } from '@prisma/client';\n\n\n// Schema validado para a jornada da Life Clinic\nconst AppointmentSchema = z.object({\n  name: z.string().min(2, \"O nome deve ter pelo menos 2 caracteres\"),\n  email: z.string().email(\"E-mail inválido\"),\n  specialty: z.nativeEnum(Specialty),\n});\n\nexport async function getDashboardData() {\n  const [gynecologists, specialists, supplies, appointmentsCount] = await Promise.all([\n    prisma.professional.findMany({\n      where: { specialty: Specialty.GYNECOLOGIST },\n      include: { user: true },\n    }),\n    prisma.professional.findMany({\n      where: { specialty: Specialty.OBSTETRICIAN },\n      include: { user: true },\n    }),\n    prisma.supply.findMany({\n      orderBy: { quantity: 'asc' },\n      take: 5\n    }),\n    prisma.appointment.count(),\n  ]);\n\n  return { gynecologists, specialists, supplies, appointmentsCount };\n}\n\nexport async function createAppointment(formData: FormData) {\n  const validatedFields = AppointmentSchema.safeParse({\n    name: formData.get('name'),\n    email: formData.get('email'),\n    specialty: formData.get('specialty'),\n  });\n\n  if (!validatedFields.success) {\n    return { error: validatedFields.error.flatten().fieldErrors };\n  }\n\n  try {\n    const targetSpecialty = validatedFields.data.specialty;\n\n    // 2. Busca um profissional disponível (regra simples: o primeiro encontrado)\n    const professional = await prisma.professional.findFirst({\n      where: { specialty: targetSpecialty }\n    });\n\n    if (!professional) {\n      return { error: \"Nenhum profissional disponível nesta categoria no momento.\" };\n    }\n\n    // 3. Cria o agendamento e o usuário (se não existir)\n    await prisma.appointment.create({\n      data: {\n        date: new Date(), // Define data atual para \"Fila de Espera\"\n        status: AppointmentStatus.PENDING,\n        notes: `Solicitação via Dashboard. Especialidade: ${validatedFields.data.specialty}`,\n        professional: { connect: { id: professional.id } },\n        patient: {\n          connectOrCreate: {\n            where: { email: validatedFields.data.email },\n            create: {\n              email: validatedFields.data.email,\n              name: validatedFields.data.name,\n              role: Role.PATIENT\n            },\n          },\n        },\n      },\n    });\n\n    revalidatePath('/dashboard');\n    return { success: true, message: \"Solicitação enviada com sucesso!\" };\n  } catch (e) {\n    console.error(e);\n    return { error: \"Erro ao conectar com o banco de dados.\" };\n  }\n}\n\n// Novo Schema para o BookingModal\nconst BookingSchema = z.object({\n  name: z.string().min(2, \"Nome é obrigatório\"),\n  email: z.string().email(\"E-mail inválido\"),\n  professionalId: z.string().min(1, \"Selecione um médico\"),\n  date: z.string().min(1, \"Selecione uma data\"),\n});\n\nexport async function scheduleAppointment(formData: FormData) {\n  const rawData = {\n    name: formData.get('name'),\n    email: formData.get('email'),\n    professionalId: formData.get('professionalId'),\n    date: formData.get('date'),\n  };\n\n  const validated = BookingSchema.safeParse(rawData);\n\n  if (!validated.success) {\n    return { error: validated.error.flatten().fieldErrors };\n  }\n\n  try {\n    await prisma.appointment.create({\n      data: {\n        date: new Date(validated.data.date),\n        status: AppointmentStatus.PENDING,\n        notes: \"Agendamento via BookingModal (Ciclo Completo)\",\n        professional: { connect: { id: Number(validated.data.professionalId) } },\n        patient: {\n          connectOrCreate: {\n            where: { email: validated.data.email },\n            create: {\n              email: validated.data.email,\n              name: validated.data.name,\n              role: Role.PATIENT\n            },\n          },\n        },\n      },\n    });\n\n    revalidatePath('/dashboard');\n    return { success: true };\n  } catch (e) {\n    console.error(e);\n    return { error: \"Erro ao processar agendamento.\" };\n  }\n}"],"names":[],"mappings":";;;;;;;MAmCsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,qDAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///home/alam/projetos/colibri/lib/selects.tsx"],"sourcesContent":["import { Specialty, Role, AppointmentStatus } from \"@prisma/client\";\n\nexport function translateSpecialty(value: Specialty): string {\n  switch (value) {\n    case Specialty.GYNECOLOGIST:\n      return \"Ginecologista (Pré-Concepção)\";\n    case Specialty.OBSTETRICIAN:\n      return \"Obstetra\";\n    case Specialty.PEDIATRICIAN:\n      return \"Pediatra\";\n    default:\n      return value;\n  }\n}\n\nexport function SpecialtySelect() {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        Especialidade\n      </label>\n      <select\n        name=\"specialty\"\n        className=\"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 outline-none\"\n      >\n        {Object.values(Specialty).map((value) => (\n          <option key={value} value={value}>\n            {translateSpecialty(value)}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}\n\nexport function translateRole(value: Role): string {\n  switch (value) {\n    case Role.PATIENT:\n      return \"Paciente\";\n    case Role.PROFESSIONAL:\n      return \"Profissional\";\n    case Role.ADMIN:\n      return \"Administrador\";\n    default:\n      return value;\n  }\n}\n\nexport function RoleSelect() {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        Tipo de Usuário\n      </label>\n      <select\n        name=\"role\"\n        className=\"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 outline-none\"\n      >\n        {Object.values(Role).map((value) => (\n          <option key={value} value={value}>\n            {translateRole(value)}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}\n\nexport function translateStatus(value: AppointmentStatus): string {\n  switch (value) {\n    case AppointmentStatus.PENDING:\n      return \"Pendente\";\n    case AppointmentStatus.CONFIRMED:\n      return \"Confirmado\";\n    case AppointmentStatus.CANCELED:\n      return \"Cancelado\";\n    case AppointmentStatus.COMPLETED:\n      return \"Concluído\";\n    default:\n      return value;\n  }\n}\n\nexport function AppointmentStatusSelect() {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        Status da Consulta\n      </label>\n      <select\n        name=\"status\"\n        className=\"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 outline-none\"\n      >\n        {Object.values(AppointmentStatus).map((value) => (\n          <option key={value} value={value}>\n            {translateStatus(value)}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;;AAEO,SAAS,mBAAmB,KAAgB;IACjD,OAAQ;QACN,KAAK,mMAAS,CAAC,YAAY;YACzB,OAAO;QACT,KAAK,mMAAS,CAAC,YAAY;YACzB,OAAO;QACT,KAAK,mMAAS,CAAC,YAAY;YACzB,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEO,SAAS;IACd,qBACE,8OAAC;;0BACC,8OAAC;gBAAM,WAAU;0BAA+C;;;;;;0BAGhE,8OAAC;gBACC,MAAK;gBACL,WAAU;0BAET,OAAO,MAAM,CAAC,mMAAS,EAAE,GAAG,CAAC,CAAC,sBAC7B,8OAAC;wBAAmB,OAAO;kCACxB,mBAAmB;uBADT;;;;;;;;;;;;;;;;AAOvB;AAEO,SAAS,cAAc,KAAW;IACvC,OAAQ;QACN,KAAK,8LAAI,CAAC,OAAO;YACf,OAAO;QACT,KAAK,8LAAI,CAAC,YAAY;YACpB,OAAO;QACT,KAAK,8LAAI,CAAC,KAAK;YACb,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEO,SAAS;IACd,qBACE,8OAAC;;0BACC,8OAAC;gBAAM,WAAU;0BAA+C;;;;;;0BAGhE,8OAAC;gBACC,MAAK;gBACL,WAAU;0BAET,OAAO,MAAM,CAAC,8LAAI,EAAE,GAAG,CAAC,CAAC,sBACxB,8OAAC;wBAAmB,OAAO;kCACxB,cAAc;uBADJ;;;;;;;;;;;;;;;;AAOvB;AAEO,SAAS,gBAAgB,KAAwB;IACtD,OAAQ;QACN,KAAK,2MAAiB,CAAC,OAAO;YAC5B,OAAO;QACT,KAAK,2MAAiB,CAAC,SAAS;YAC9B,OAAO;QACT,KAAK,2MAAiB,CAAC,QAAQ;YAC7B,OAAO;QACT,KAAK,2MAAiB,CAAC,SAAS;YAC9B,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEO,SAAS;IACd,qBACE,8OAAC;;0BACC,8OAAC;gBAAM,WAAU;0BAA+C;;;;;;0BAGhE,8OAAC;gBACC,MAAK;gBACL,WAAU;0BAET,OAAO,MAAM,CAAC,2MAAiB,EAAE,GAAG,CAAC,CAAC,sBACrC,8OAAC;wBAAmB,OAAO;kCACxB,gBAAgB;uBADN;;;;;;;;;;;;;;;;AAOvB"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///home/alam/projetos/colibri/lib/appointment-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { createAppointment } from \"../actions\";\nimport { PlusCircle, X } from \"lucide-react\";\nimport { SpecialtySelect } from \"./selects\";\n\nexport function AppointmentModal() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isPending, setIsPending] = useState(false);\n\n  async function handleSubmit(formData: FormData) {\n    setIsPending(true);\n    await createAppointment(formData);\n    setIsPending(false);\n    setIsOpen(false);\n    alert(\"Solicitação enviada! Entraremos em contato.\");\n  }\n\n  return (\n    <>\n      <button\n        onClick={() => setIsOpen(true)}\n        className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors\"\n      >\n        <PlusCircle className=\"w-5 h-5\" />\n        Novo Agendamento\n      </button>\n\n      {isOpen && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl p-6 w-full max-w-md relative shadow-xl\">\n            <button \n              onClick={() => setIsOpen(false)}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n            \n            <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Agendamento Rápido</h2>\n            \n            <form action={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nome Completo</label>\n                <input name=\"name\" required className=\"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 outline-none\" />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">E-mail</label>\n                <input name=\"email\" type=\"email\" required className=\"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 outline-none\" />\n              </div>\n\n              <SpecialtySelect />\n\n              <button disabled={isPending} type=\"submit\" className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors disabled:opacity-50\">\n                {isPending ? \"Enviando...\" : \"Confirmar Solicitação\"}\n              </button>\n            </form>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAOO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,eAAe,aAAa,QAAkB;QAC5C,aAAa;QACb,MAAM,IAAA,yJAAiB,EAAC;QACxB,aAAa;QACb,UAAU;QACV,MAAM;IACR;IAEA,qBACE;;0BACE,8OAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;;kCAEV,8OAAC,gOAAU;wBAAC,WAAU;;;;;;oBAAY;;;;;;;YAInC,wBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,UAAU;4BACzB,WAAU;sCAEV,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;sCAGf,8OAAC;4BAAG,WAAU;sCAAuC;;;;;;sCAErD,8OAAC;4BAAK,QAAQ;4BAAc,WAAU;;8CACpC,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,8OAAC;4CAAM,MAAK;4CAAO,QAAQ;4CAAC,WAAU;;;;;;;;;;;;8CAGxC,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAChE,8OAAC;4CAAM,MAAK;4CAAQ,MAAK;4CAAQ,QAAQ;4CAAC,WAAU;;;;;;;;;;;;8CAGtD,8OAAC,kIAAe;;;;;8CAEhB,8OAAC;oCAAO,UAAU;oCAAW,MAAK;oCAAS,WAAU;8CAClD,YAAY,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7C"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///home/alam/projetos/colibri/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IAMVC,qBAAqB,EAAA;eAArBA,QAAAA,qBAAqB;;IALrBC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;wBAKK","ignoreList":[0]}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/circle-plus.js","sources":["file:///home/alam/projetos/colibri/node_modules/lucide-react/src/icons/circle-plus.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 12h8', key: '1wcyev' }],\n  ['path', { d: 'M12 8v8', key: 'napkw2' }],\n];\n\n/**\n * @component @name CirclePlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxMmg4IiAvPgogIDxwYXRoIGQ9Ik0xMiA4djgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CirclePlus = createLucideIcon('circle-plus', __iconNode);\n\nexport default CirclePlus;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,QAAA,CAAA;QAAU,CAAA;YAAE,EAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA;YAAM,CAAA,CAAA,CAAA,CAAI,IAAA,CAAA;YAAM,CAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,GAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACzD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAW,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACxC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAW,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;CAC1C;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,KAAa,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,8JAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAe,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}}]
}