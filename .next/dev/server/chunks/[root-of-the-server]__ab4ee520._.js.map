{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/alam/projetos/colibri/proxy.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { getToken } from \"next-auth/jwt\";\n\nexport default async function proxy(req: Request) {\n  const url = new URL(req.url);\n  // getToken requer 'req' como NextRequest ou objeto compat√≠vel.\n  // Em proxy.ts (Next.js 16), 'req' √© Request padr√£o.\n  // O cast ou adapta√ß√£o pode ser necess√°rio dependendo da vers√£o exata do next-auth.\n  const token = await getToken({ req: req as any, secret: process.env.NEXTAUTH_SECRET });\n\n  // üîπ Se n√£o estiver logado, redireciona para /login\n  if (!token) {\n    if (\n      url.pathname.startsWith(\"/dashboard\") ||\n      url.pathname.startsWith(\"/admin\") ||\n      url.pathname.startsWith(\"/consultas\")\n    ) {\n      return NextResponse.redirect(new URL(\"/login\", req.url));\n    }\n    return NextResponse.next();\n  }\n\n  // üîπ Prote√ß√£o por role\n  if (url.pathname.startsWith(\"/admin\") && token.role !== \"ADMIN\") {\n    return NextResponse.redirect(new URL(\"/\", req.url));\n  }\n\n  if (url.pathname.startsWith(\"/consultas\") && token.role !== \"PROFESSIONAL\") {\n    return NextResponse.redirect(new URL(\"/\", req.url));\n  }\n\n  return NextResponse.next();\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEe,eAAe,MAAM,GAAY;IAC9C,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;IAC3B,+DAA+D;IAC/D,oDAAoD;IACpD,mFAAmF;IACnF,MAAM,QAAQ,MAAM,IAAA,wJAAQ,EAAC;QAAE,KAAK;QAAY,QAAQ,QAAQ,GAAG,CAAC,eAAe;IAAC;IAEpF,oDAAoD;IACpD,IAAI,CAAC,OAAO;QACV,IACE,IAAI,QAAQ,CAAC,UAAU,CAAC,iBACxB,IAAI,QAAQ,CAAC,UAAU,CAAC,aACxB,IAAI,QAAQ,CAAC,UAAU,CAAC,eACxB;YACA,OAAO,8IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,IAAI,GAAG;QACxD;QACA,OAAO,8IAAY,CAAC,IAAI;IAC1B;IAEA,uBAAuB;IACvB,IAAI,IAAI,QAAQ,CAAC,UAAU,CAAC,aAAa,MAAM,IAAI,KAAK,SAAS;QAC/D,OAAO,8IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,IAAI,GAAG;IACnD;IAEA,IAAI,IAAI,QAAQ,CAAC,UAAU,CAAC,iBAAiB,MAAM,IAAI,KAAK,gBAAgB;QAC1E,OAAO,8IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,IAAI,GAAG;IACnD;IAEA,OAAO,8IAAY,CAAC,IAAI;AAC1B"}}]
}